# 🔒 메인넷 배포 Step-by-Step 완전 체크리스트

**작성일**: 2025-11-01  
**목적**: 에러 없는 안전한 메인넷 배포

---

## 🎯 배포 원칙

```
╔═══════════════════════════════════════════════════╗
║          철두철미 배포 원칙                        ║
╠═══════════════════════════════════════════════════╣
║  1. 모든 단계 개별 확인                           ║
║  2. 에러 발견 시 즉시 중단                        ║
║  3. 각 단계 사용자 승인 필수                      ║
║  4. 테스트넷 먼저 완료                            ║
║  5. 메인넷 배포 전 3중 확인                       ║
║                                                    ║
║  ⛔ 에러 있으면 절대 배포 안함!                  ║
╚═══════════════════════════════════════════════════╝
```

---

## 📋 STEP 1: 환경 설정 확인

### ✅ 체크 1-1: .env 파일

**확인 항목**:
```bash
[ ] .env 파일 존재
[ ] PRIVATE_KEY 존재
[ ] PRIVATE_KEY 64자 (32 bytes)
[ ] TREASURY_ADDRESS 존재
[ ] TREASURY_ADDRESS 올바른 형식 (0x + 40자)
[ ] Treasury 주소 일치: 0x6CE8903FD7dA2ec919450544f305708BB8A19a1f
```

**검증 명령어**:
```bash
node scripts/pre-deployment-check.js
```

**통과 기준**:
- ✅ 모든 항목 초록불
- ❌ 빨간불 1개라도 있으면 중단!

**사용자 확인**: 
```
🔴 STEP 1-1 완료되었나요? (yes/no)
   에러 없이 모두 통과했나요?
```

---

### ✅ 체크 1-2: 의존성 설치

**확인 항목**:
```bash
[ ] node_modules 디렉토리 존재
[ ] hardhat 패키지 설치
[ ] ethers 패키지 설치
[ ] @openzeppelin/contracts 설치
```

**검증 명령어**:
```bash
npm list hardhat ethers @openzeppelin/contracts
```

**통과 기준**:
- ✅ 모든 패키지 설치 확인
- ❌ 패키지 하나라도 없으면 중단!

**사용자 확인**: 
```
🔴 STEP 1-2 완료되었나요? (yes/no)
   모든 패키지가 설치되었나요?
```

---

### ✅ 체크 1-3: 네트워크 설정

**확인 항목**:
```bash
[ ] hardhat.config.js 존재
[ ] bscMainnet 네트워크 설정
[ ] bscTestnet 네트워크 설정
[ ] Solidity 버전 0.8.19
[ ] Optimizer 활성화
```

**검증 명령어**:
```bash
npx hardhat --version
grep -A 5 "bscMainnet" hardhat.config.js
```

**통과 기준**:
- ✅ 모든 설정 올바름
- ❌ 설정 오류 있으면 중단!

**사용자 확인**: 
```
🔴 STEP 1-3 완료되었나요? (yes/no)
   네트워크 설정이 올바른가요?
```

---

## 📋 STEP 2: 컨트랙트 검증

### ✅ 체크 2-1: 소스 코드

**확인 항목**:
```bash
[ ] contracts/AKC.sol 존재
[ ] pragma solidity ^0.8.19
[ ] contract AKC 선언
[ ] constructor(address treasury) 정의
[ ] ERC20Burnable 상속
[ ] Pausable 상속
[ ] Ownable 상속
[ ] TOTAL_SUPPLY = 300,000,000
```

**검증 명령어**:
```bash
cat contracts/AKC.sol | grep -E "pragma|contract|constructor|Burnable|Pausable|Ownable|300_000_000"
```

**통과 기준**:
- ✅ 모든 요소 존재
- ❌ 요소 하나라도 없으면 중단!

**사용자 확인**: 
```
🔴 STEP 2-1 완료되었나요? (yes/no)
   컨트랙트 코드가 올바른가요?
```

---

### ✅ 체크 2-2: 컴파일

**확인 항목**:
```bash
[ ] 컴파일 실행
[ ] 컴파일 에러 없음
[ ] artifacts 디렉토리 생성
[ ] AKC.json 생성
[ ] Bytecode 존재
```

**검증 명령어**:
```bash
npx hardhat clean
npx hardhat compile
```

**통과 기준**:
- ✅ 컴파일 성공
- ❌ 에러 있으면 중단!

**사용자 확인**: 
```
🔴 STEP 2-2 완료되었나요? (yes/no)
   컴파일이 성공했나요?
```

---

### ✅ 체크 2-3: 배포 스크립트

**확인 항목**:
```bash
[ ] scripts/deploy.js 존재
[ ] Treasury 주소 참조
[ ] 에러 처리 존재
[ ] 배포 로그 출력
```

**검증 명령어**:
```bash
cat scripts/deploy.js | grep -E "TREASURY_ADDRESS|deploy|error|console"
```

**통과 기준**:
- ✅ 모든 요소 존재
- ❌ 요소 없으면 중단!

**사용자 확인**: 
```
🔴 STEP 2-3 완료되었나요? (yes/no)
   배포 스크립트가 올바른가요?
```

---

## 📋 STEP 3: 테스트 실행

### ✅ 체크 3-1: 기본 테스트

**확인 항목**:
```bash
[ ] test 디렉토리 존재
[ ] 테스트 파일 존재
[ ] 모든 테스트 통과
[ ] 에러 없음
```

**검증 명령어**:
```bash
npx hardhat test --grep "should"
```

**통과 기준**:
- ✅ 모든 테스트 통과
- ❌ 테스트 실패하면 중단!

**사용자 확인**: 
```
🔴 STEP 3-1 완료되었나요? (yes/no)
   모든 테스트가 통과했나요?
```

---

### ✅ 체크 3-2: 가스 테스트

**확인 항목**:
```bash
[ ] 가스 추정 테스트
[ ] 배포 가스 확인
[ ] Transfer 가스 확인
[ ] 가스 한도 내
```

**검증 명령어**:
```bash
node scripts/estimate-deployment-gas.js
```

**통과 기준**:
- ✅ 가스 예상치 정상
- ❌ 가스 초과하면 중단!

**사용자 확인**: 
```
🔴 STEP 3-2 완료되었나요? (yes/no)
   가스 예상이 정상인가요?
```

---

## 📋 STEP 4: 테스트넷 배포 (필수!)

### ✅ 체크 4-1: 테스트넷 준비

**확인 항목**:
```bash
[ ] 테스트넷 BNB 보유
[ ] 지갑 주소 확인
[ ] 네트워크 연결 확인
```

**검증 명령어**:
```bash
# 테스트 BNB 받기
# https://testnet.bnbchain.org/faucet-smart
```

**통과 기준**:
- ✅ 테스트 BNB 0.1 이상
- ❌ BNB 없으면 중단!

**사용자 확인**: 
```
🔴 STEP 4-1 완료되었나요? (yes/no)
   테스트 BNB를 받았나요?
```

---

### ✅ 체크 4-2: 테스트넷 배포 실행

**확인 항목**:
```bash
[ ] 배포 명령어 실행
[ ] 배포 성공
[ ] 컨트랙트 주소 획득
[ ] 트랜잭션 해시 확인
```

**검증 명령어**:
```bash
npx hardhat run scripts/deploy.js --network bscTestnet
```

**통과 기준**:
- ✅ 배포 성공
- ❌ 배포 실패하면 중단!

**사용자 확인**: 
```
🔴 STEP 4-2 완료되었나요? (yes/no)
   테스트넷 배포가 성공했나요?
   컨트랙트 주소: _________________
```

---

### ✅ 체크 4-3: 테스트넷 검증

**확인 항목**:
```bash
[ ] BscScan Testnet에서 확인
[ ] 컨트랙트 조회 가능
[ ] Treasury에 300M AKC
[ ] 소스 코드 검증
```

**검증 명령어**:
```bash
# BscScan Testnet
# https://testnet.bscscan.com/address/[주소]

npx hardhat verify --network bscTestnet [ADDRESS] [TREASURY]
```

**통과 기준**:
- ✅ 모든 확인 완료
- ❌ 문제 있으면 중단!

**사용자 확인**: 
```
🔴 STEP 4-3 완료되었나요? (yes/no)
   테스트넷에서 정상 작동하나요?
```

---

### ✅ 체크 4-4: 테스트넷 기능 테스트

**확인 항목**:
```bash
[ ] Transfer 테스트
[ ] Burn 테스트
[ ] Approve 테스트
[ ] Pause/Unpause 테스트
[ ] 모든 기능 정상
```

**검증 명령어**:
```bash
# 테스트 전송 실행
# MetaMask로 테스트
```

**통과 기준**:
- ✅ 모든 기능 정상
- ❌ 기능 오류 있으면 중단!

**사용자 확인**: 
```
🔴 STEP 4-4 완료되었나요? (yes/no)
   모든 기능이 정상 작동하나요?
```

---

## 📋 STEP 5: 메인넷 배포 전 최종 확인

### ✅ 체크 5-1: 재검증 (1차)

**확인 항목**:
```bash
[ ] 모든 STEP 1-4 재확인
[ ] 에러 없음 확인
[ ] 테스트넷 성공 확인
[ ] 로그 파일 확인
```

**검증 명령어**:
```bash
node scripts/pre-deployment-check.js
```

**통과 기준**:
- ✅ 모든 항목 통과
- ❌ 에러 있으면 중단!

**사용자 확인**: 
```
🔴 STEP 5-1 (1차 확인) 완료되었나요? (yes/no)
   모든 체크가 통과했나요?
```

---

### ✅ 체크 5-2: 메인넷 준비 (2차)

**확인 항목**:
```bash
[ ] 메인넷 BNB 보유 (0.01 이상)
[ ] 가스 가격 확인 (3-5 Gwei)
[ ] 최적 시간 확인 (새벽 2-6시)
[ ] Treasury 주소 3번 확인
```

**검증 명령어**:
```bash
# BscScan Gas Tracker
# https://bscscan.com/gastracker

# Treasury 주소 3번 확인
echo "0x6CE8903FD7dA2ec919450544f305708BB8A19a1f"
```

**통과 기준**:
- ✅ 모든 준비 완료
- ❌ 준비 안되면 중단!

**사용자 확인**: 
```
🔴 STEP 5-2 (2차 확인) 완료되었나요? (yes/no)
   메인넷 배포 준비가 되었나요?
   
   BNB 잔액: _______ BNB
   가스 가격: ______ Gwei
   Treasury: 0x6CE8903FD7dA2ec919450544f305708BB8A19a1f
```

---

### ✅ 체크 5-3: 최종 승인 (3차)

**확인 항목**:
```bash
[ ] 모든 이전 단계 완료
[ ] 에러 0개 확인
[ ] 팀 승인 획득
[ ] 백업 완료
```

**통과 기준**:
- ✅ 모든 확인 완료
- ❌ 미완료 있으면 중단!

**사용자 확인**: 
```
🔴 STEP 5-3 (3차 최종 확인) 완료되었나요? (yes/no)
   
   ⚠️  정말로 메인넷에 배포하시겠습니까?
   
   이 작업은 되돌릴 수 없습니다!
   
   다시 한번 확인:
   [ ] 모든 테스트 통과
   [ ] 테스트넷 성공
   [ ] 에러 0개
   [ ] 가스비 준비
   [ ] Treasury 주소 확인
   
   최종 승인: (yes/no) _______
```

---

## 📋 STEP 6: 메인넷 배포 (승인 후에만)

### ✅ 체크 6-1: 배포 실행

**확인 항목**:
```bash
[ ] STEP 5-3 최종 승인 완료
[ ] 배포 명령어 실행
[ ] 배포 진행 중 모니터링
```

**검증 명령어**:
```bash
# 최종 승인 후에만 실행!
npx hardhat run scripts/deploy.js --network bscMainnet
```

**통과 기준**:
- ✅ 배포 성공
- ❌ 실패 시 즉시 보고!

**사용자 확인**: 
```
🔴 STEP 6-1 완료되었나요? (yes/no)
   메인넷 배포가 성공했나요?
   
   컨트랙트 주소: _________________
   트랜잭션: _____________________
```

---

### ✅ 체크 6-2: 즉시 검증

**확인 항목**:
```bash
[ ] BscScan에서 컨트랙트 확인
[ ] Treasury 잔액 확인
[ ] 소스 코드 검증
[ ] 에러 없음 확인
```

**검증 명령어**:
```bash
# BscScan
# https://bscscan.com/address/[주소]

npx hardhat verify --network bscMainnet [ADDRESS] [TREASURY]
```

**통과 기준**:
- ✅ 모든 확인 완료
- ❌ 문제 있으면 즉시 보고!

**사용자 확인**: 
```
🔴 STEP 6-2 완료되었나요? (yes/no)
   BscScan에서 확인했나요?
   모든 것이 정상인가요?
```

---

### ✅ 체크 6-3: 기능 테스트

**확인 항목**:
```bash
[ ] 테스트 전송 실행
[ ] Transfer 성공 확인
[ ] 이벤트 발생 확인
[ ] 모든 기능 정상
```

**검증 명령어**:
```bash
# MetaMask로 테스트 전송
# 소액 (0.1 AKC) 전송 테스트
```

**통과 기준**:
- ✅ 모든 기능 정상
- ❌ 문제 있으면 즉시 보고!

**사용자 확인**: 
```
🔴 STEP 6-3 완료되었나요? (yes/no)
   모든 기능이 정상 작동하나요?
```

---

## 📋 STEP 7: 배포 후 작업

### ✅ 체크 7-1: 문서 업데이트

**확인 항목**:
```bash
[ ] README 업데이트
[ ] 컨트랙트 주소 기록
[ ] 배포 날짜 기록
[ ] Git 커밋
```

**사용자 확인**: 
```
🔴 STEP 7-1 완료되었나요? (yes/no)
   문서가 업데이트되었나요?
```

---

### ✅ 체크 7-2: 로고 제출

**확인 항목**:
```bash
[ ] BscScan 로고 제출
[ ] CoinMarketCap 신청
[ ] CoinGecko 신청
```

**사용자 확인**: 
```
🔴 STEP 7-2 완료되었나요? (yes/no)
   로고 제출을 시작했나요?
```

---

## 🚨 에러 발생 시 프로토콜

### 즉시 중단 조건

```
1. ❌ 컴파일 에러
   → 즉시 중단, 코드 수정

2. ❌ 테스트 실패
   → 즉시 중단, 테스트 수정

3. ❌ 테스트넷 배포 실패
   → 즉시 중단, 원인 파악

4. ❌ 기능 오류
   → 즉시 중단, 디버깅

5. ❌ 메인넷 배포 실패
   → 즉시 보고, 원인 분석
```

### 재시도 프로토콜

```
1. 에러 원인 파악
2. 수정 완료
3. STEP 1부터 재시작
4. 모든 체크 다시 수행
5. 승인 후 재배포
```

---

## 📊 체크리스트 요약

```
╔═══════════════════════════════════════════════════╗
║          전체 체크리스트                           ║
╠═══════════════════════════════════════════════════╣
║  STEP 1: 환경 설정 (3개 체크)                    ║
║  STEP 2: 컨트랙트 검증 (3개 체크)                ║
║  STEP 3: 테스트 실행 (2개 체크)                  ║
║  STEP 4: 테스트넷 배포 (4개 체크) ✅ 필수!      ║
║  STEP 5: 최종 확인 (3개 체크) ⚠️  3중 확인!    ║
║  STEP 6: 메인넷 배포 (3개 체크)                  ║
║  STEP 7: 배포 후 작업 (2개 체크)                 ║
║                                                    ║
║  총 체크: 20개                                     ║
║  모두 통과해야 배포 가능! ✅                      ║
╚═══════════════════════════════════════════════════╝
```

---

## 🎯 배포 순서 (절대 준수!)

```
1. STEP 1-1 → 사용자 승인
2. STEP 1-2 → 사용자 승인
3. STEP 1-3 → 사용자 승인
4. STEP 2-1 → 사용자 승인
5. STEP 2-2 → 사용자 승인
6. STEP 2-3 → 사용자 승인
7. STEP 3-1 → 사용자 승인
8. STEP 3-2 → 사용자 승인
9. STEP 4-1 → 사용자 승인
10. STEP 4-2 → 사용자 승인
11. STEP 4-3 → 사용자 승인
12. STEP 4-4 → 사용자 승인
13. STEP 5-1 → 사용자 승인 (1차)
14. STEP 5-2 → 사용자 승인 (2차)
15. STEP 5-3 → 사용자 최종 승인 (3차) ⚠️
16. STEP 6-1 → 메인넷 배포
17. STEP 6-2 → 즉시 검증
18. STEP 6-3 → 기능 테스트
19. STEP 7-1 → 문서 업데이트
20. STEP 7-2 → 로고 제출

각 STEP마다 사용자 승인 필수!
에러 발견 시 즉시 중단!
```

---

**작성일**: 2025-11-01  
**버전**: 1.0.0  
**상태**: ✅ 완전한 체크리스트  
**총 체크**: 20단계
